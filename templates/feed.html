<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FLAM Social Feed</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
    <div class="max-w-3xl mx-auto py-8">
        <h1 class="text-3xl font-bold mb-6 text-center">üî• FLAM Social Feed</h1>

        <!-- Create Post Form -->
        <div class="bg-white p-6 rounded shadow mb-6">
            <form action="/post" method="post" class="space-y-4">
                <div>
                    <input name="user_name" required placeholder="Your name" class="w-full px-4 py-2 border rounded" />
                </div>
                <div>
                    <textarea name="content" required placeholder="What's on your mind?" class="w-full px-4 py-2 border rounded"></textarea>
                </div>
                <div>
                    <input name="image_url" placeholder="Image URL (optional)" class="w-full px-4 py-2 border rounded" />
                </div>
                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Post</button>
            </form>
        </div>

        <!-- Posts Loop -->
        {% for post in posts %}
        <div class="bg-white p-6 rounded shadow mb-4">
            <div class="flex items-center justify-between mb-2">
                <span class="font-semibold">{{ post.user_name }}</span>
                <span class="text-sm text-gray-500">{{ post.timestamp }}</span>
            </div>
            <p class="mb-2">{{ post.content }}</p>
            {% if post.image_url %}
                <img src="{{ post.image_url }}" alt="Post Image" class="w-full rounded mb-2">
            {% endif %}

            <!-- Actions -->
            <div class="flex items-center justify-between text-sm text-gray-600 mt-4">
                <form action="/like/{{ post.id }}" method="post">
                    <button class="hover:text-red-600" title="Like">‚ù§Ô∏è {{ post.likes }}</button>
                </form>

                <form action="/save/{{ post.id }}" method="post">
                    <button class="hover:text-green-600" title="Save">
                        {% if post.saved %}‚úÖ Saved{% else %}üìå Save{% endif %}
                    </button>
                </form>

                <a href="/post/{{ post.id }}" class="text-blue-600 hover:underline" title="Share">üîó Share</a>
            </div>

            <!-- Comment Section -->
            <div class="mt-4">
                <h3 class="font-semibold text-sm mb-1">Comments:</h3>
                <ul class="text-sm space-y-1 mb-2">
                    {% for comment in post.comments %}
                        <li>üí¨ {{ comment }}</li>
                    {% endfor %}
                </ul>
                <form action="/comment/{{ post.id }}" method="post" class="flex gap-2">
                    <input name="comment" placeholder="Add comment..." required class="flex-1 px-2 py-1 border rounded" />
                    <button type="submit" class="text-sm bg-gray-800 text-white px-2 py-1 rounded">Post</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</body>
</html>
